"use strict";(function(){var r=null;function b(){}function d(a,t){if(a&&a.indexOf("<head")>-1){const v=document.createElement("html");var i=a.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,""),f=i.match(/(<head(\s[^>]*>|>)([\s\S]*?)<\/head>)/im);if(f){var s=[],n=[],c=[],h=[];v.innerHTML=f;var l=v.querySelector("head"),u=document.head;if(l==null)return;var o=new Map;for(const e of l.children)o.set(e.outerHTML,e);var x=r.getAttributeValue(l,"hx-head")||t;for(const e of u.children){var p=o.has(e.outerHTML),g=e.getAttribute("hx-head")==="re-eval",E=r.getAttributeValue(e,"hx-preserve")==="true";p||E?g?n.push(e):(o.delete(e.outerHTML),c.push(e)):x==="append"?g&&(n.push(e),h.push(e)):r.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:e})!==!1&&n.push(e)}h.push(...o.values());for(const e of h){var m=document.createRange().createContextualFragment(e.outerHTML);r.triggerEvent(document.body,"htmx:addingHeadElement",{headElement:m})!==!1&&(u.appendChild(m),s.push(m))}for(const e of n)r.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:e})!==!1&&u.removeChild(e);r.triggerEvent(document.body,"htmx:afterHeadMerge",{added:s,kept:c,removed:n})}}}htmx.defineExtension("head-support",{init:function(a){r=a,htmx.on("htmx:afterSwap",function(t){var i=t.detail.xhr.response;r.triggerEvent(document.body,"htmx:beforeHeadMerge",t.detail)&&d(i,t.detail.boosted?"merge":"append")}),htmx.on("htmx:historyRestore",function(t){r.triggerEvent(document.body,"htmx:beforeHeadMerge",t.detail)&&(t.detail.cacheMiss?d(t.detail.serverResponse,"merge"):d(t.detail.item.head,"merge"))}),htmx.on("htmx:historyItemCreated",function(t){var i=t.detail.item;i.head=document.head.outerHTML})}})})();
