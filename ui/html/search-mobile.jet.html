{{ block searchMobile() }}
	<div
		id="search-mobile"
		_="on open
		       set @aria-expanded to 'true'
			   transition #underlay's opacity to 95% over 200ms
			   set searchMobile to #search-mobile-input then searchMobile.focus()
		   end
           on close or click from #underlay
		       transition #underlay's opacity to 0 over 200ms
			   set @aria-expanded to 'false'
			   toggle between .hidden and .block on <footer/>
			   call history.pushState(null, null, '/')
		   end"
		class="hidden aria-expanded:grid fixed inset-0 z-50 h-screen"
	>
		<div id="underlay" class="absolute inset-0 -z-10 bg-slate-950 opacity-0"></div>
		<form
			_="on submit(event) event.preventDefault()"
			hx-post="/search"
			hx-target="#search-results-mobile"
			hx-trigger="input from:.search-mobile delay:300ms"
			class="p-4 self-start"
		>
			{{ yield inputSearch(id="search-mobile-input", label="Search", name="search", placeholder="e.g. In Absentia", class="search-mobile") }}
		</form>
		<ul
			_="on htmx:afterSettle
			       remove .hidden from me"
			id="search-results-mobile"
			class="hidden px-4 flex flex-col overflow-y-auto"
		></ul>
	</div>
{{ end }}
